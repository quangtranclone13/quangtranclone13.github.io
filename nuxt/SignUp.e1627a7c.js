import se from"./Form.074b64ba.js";import ie from"./ScrollText.94455b24.js";import{a as r,u as ne}from"./useGTag.98087ddc.js";import{d as re,q as le,K as h,r as c,L as t,x as P,y as B,m as o,aS as G,aT as O,N as b,bT as ae,bU as C,bV as ce,M as V,o as N,a as W,f as n,t as a,l as pe,u as g,w as T,z as ue,F as ge,v as de,bo as fe,aU as me,H as _e,bW as D,W as he}from"./entry.8cba7e1e.js";/* empty css                   */import{_ as be}from"./_plugin-vue_export-helper.a1a6add7.js";import"./Form.vue.05855c5e.js";import"./FormItemRender.vue.7116eee4.js";import"./Upload.74a010bf.js";import"./CountrySelect.aae122e7.js";import"./payment.81dfa3b1.js";import"./VerificationCodeInput.d58b074a.js";import"./useValidator.21496c0f.js";import"./timer.4152b58e.js";const ke={class:"sign-up"},xe={class:"sign-up-title"},ve={class:"sign-up-content"},we={class:"form-input"},Ue={class:"sign-up-desc"},ye={class:"form-checkbox"},Ce={class:"other-sign-up"},Te={class:"text-flag"},Ie={class:"other-sign-button"},Le=["src"],Ee={class:"account"},Se=re({__name:"SignUp",props:{showRepeatPsd:{type:Boolean,default:()=>!0}},emits:["signUpClick","createAccount","otherLoginClick","pointSumbitClick"],setup(z,{expose:j,emit:m}){const I=z;let{useLoginGTag:q}=ne(),{_PointOfficialSignUp:l}=q(),{useCommonMp:H}=fe(),{_pointMpWebsiteSignUpPop:K,_pointMpWebsiteSignUp:L}=H();le(()=>{K()});let k=h({marginTop:"8px"}),E=c(),x=c(!1);const v=c(!1),Z=async(e,s,i)=>{if(v.value=!1,he.test(s)){let y=(await me({email:d.email})).login_tag;return[1,3,5,7].includes(y)?(v.value=!0,i(new Error)):i()}else return i(new Error(t("login.signIn.error")))},J=(e,s,i)=>{if(k.marginTop="25px",s.length<8||s.length>16)return i(new Error(t("login.signUp.errArr[2]")));if(/^[0-9]+$/.test(s))return i(new Error(t("login.signUp.errArr[0]")));if(/^[A-Za-z]+$/.test(s))return i(new Error(t("login.signUp.errArr[1]")));if(/[\u4e00-\u9fa5]+/.test(s)||/[ぁ-んァ-ヶ]+/.test(s)||/\s+/.test(s))return i(new Error(t("login.signUp.errArr[3]")));k.marginTop="8px",i()},Q=(e,s,i)=>{s!==d.password?i(new Error(t("login.signUp.errPsdRepeat"))):i()};let d=h({email:"",password:"",password2:""});const S=h({email:[{validator:Z,trigger:"blur"}],password:[{validator:J,trigger:"blur"}],password2:[{validator:Q,trigger:"blur"}]}),p=c([{type:"input",model:"email",label:t("login.label.email"),onBlur(){l({official_operate:r.input_email})},clearable:!0,childSlots:e=>P(o("div",{class:"email-exist"},[o("span",null,[t("login.signUp.errLogin")]),I.showRepeatPsd&&o("span",{class:"c-email-exist",onClick:R},[t("login.signUp.errLoginOtherText")])]),[[B,v.value]])},{type:"input",model:"password",label:t("login.label.psd"),itype:"password",onBlur(){l({official_operate:r.input_password})},clearable:!0,slots:!0,slotsFormatter(){let e=t("login.signUp.psdTip")+"@#$%^&*-_+=[]{}|\\:',?/`~\"();!.<>";return o("div",{class:"password-tooltip",style:k},[e])},suffixSlot(){return o("div",{class:"eyes-wrapper"},[o("span",{class:"eyes-wrapper-text"},null),o("img",{src:p.value[1].itype?G:O,class:"eyes-icon",onClick:()=>{$(1)}},null)])}},{type:"input",model:"password2",label:t("login.label.rPsd"),itype:"password",onBlur(){l({official_operate:r.input_password_again})},enterClick:!0,enterClickFn:()=>{F()},clearable:!0,suffixSlot(){return o("div",{class:"eyes-wrapper"},[o("span",{class:"eyes-wrapper-text"},null),o("img",{src:p.value[2].itype?G:O,class:"eyes-icon",onClick:()=>{$(2)}},null)])}}]),A=c();let _=h({checkbox:[1]});const X=c([{model:"checkbox",type:"checkbox",options:[{label:t("login.signUp.checkbox[0]"),value:1},{formatter(){let e=t("login.signUp.checkbox[1]"),s=t("login.signUp.checkboxT[0]"),i=t("login.signUp.checkboxT[1]"),f=t("login.signUp.checkboxT[2]"),u=t("login.signUp.checkboxT[3]");return o("div",{class:"checkbox-formatter"},[o("span",null,[e,b("\xA0")]),o("span",{class:"checkbox-formatter-t1",onClick:()=>{window.open("/policy/terms")}},[s]),o("span",{class:"checkbox-formatter-t2"},[f,b("\xA0")]),o("span",{class:"checkbox-formatter-t3",onClick:()=>{window.open("/policy/privacy")}},[i]),o("span",null,[b("\xA0"),u])])},value:2}]}]),Y=[{text:t("login.signUp.btnText[0]"),icon:ae,action:C.Google},{text:t("login.signUp.btnText[1]"),icon:ce,action:C.Facebook}];V(()=>_.checkbox,e=>{e.length&&e.find(s=>s===2)&&(l({official_operate:r.check_terms}),x.value=!1)},{deep:!0}),V(()=>I.showRepeatPsd,e=>{e||(delete S.password2,delete d.password2,p.value.splice(2))},{immediate:!0});const $=e=>{p.value[e].itype=p.value[e].itype?"":"password"},ee=e=>{l({official_operate:e.action===C.Google?r.click_google:r.click_facebook}),m("otherLoginClick",e.action)},R=()=>{l({official_operate:r.click_signin}),m("signUpClick")},F=()=>{l({official_operate:r.click_signup}),m("pointSumbitClick"),A.value.validate()},w=c();let U=!0;const oe=()=>{U=!0,w.value&&w.value.close()},M=()=>{U=!1,w.value=_e({target:E.value})};j({closeLoading:oe,openLoading:M});const te=async e=>{e?_.checkbox.length&&_.checkbox.find(s=>s===2)&&U?(M(),m("createAccount",d)):(l({official_operate:r.prompt_please_tick}),L({type:"createAccount",result:D.Failure}),x.value=!0):L({type:"createAccount",result:D.Failure})};return(e,s)=>{const i=se,f=ie;return N(),W("div",ke,[n("div",xe,a(e.$t("login.signUp.title")),1),pe(e.$slots,"titleDesc",{},void 0,!0),n("div",ve,[n("div",we,[o(i,{ref_key:"formRef",ref:A,"form-input-list":g(p),"form-inline":!1,"form-rules":g(S),"form-label-position":"top","form-model":g(d),onValidate:te},null,8,["form-input-list","form-rules","form-model"])]),n("div",{ref_key:"signUpRef",ref:E,class:"sign-up-button"},[o(f,{onClick:F},{default:T(()=>[b(a(e.$t("login.signUp.buttonText")),1)]),_:1})],512),n("div",Ue,a(e.$t("login.signUp.desc")),1),n("div",ye,[o(i,{"form-input-list":g(X),"form-inline":!1,"form-model":g(_)},null,8,["form-input-list","form-model"]),o(ue,{name:"fade"},{default:T(()=>[P(n("div",{class:"form-checkbox-error-tip"},a(e.$t("login.signUp.checkboxTip")),513),[[B,g(x)]])]),_:1})])]),n("div",Ce,[n("div",Te,[n("span",null,a(e.$t("login.signUp.social")),1)]),n("div",Ie,[(N(),W(ge,null,de(Y,(u,y)=>n("div",{key:y,class:"other-sign-button-item"},[o(f,{onClick:Ae=>ee(u)},{default:T(()=>[n("img",{src:u.icon,alt:""},null,8,Le),n("span",null,a(u.text),1)]),_:2},1032,["onClick"])])),64))]),n("div",Ee,[n("span",null,a(e.$t("login.signUp.account")),1),n("span",{onClick:R},a(e.$t("login.signIn.title")),1)])])])}}}),qe=be(Se,[["__scopeId","data-v-bc4ef240"]]);export{qe as default};
