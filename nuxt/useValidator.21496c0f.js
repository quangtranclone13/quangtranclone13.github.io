import{r as f,af as I,ag as R,M as T,ah as S,W as p,L as l,ai as C,aj as b,u as q}from"./entry.8cba7e1e.js";import{u as x}from"./timer.4152b58e.js";function y(g={}){const{interval:r=60,timeout:i=1e3,sId:u=1}=g,t=x(),s=f(!1),a=I(`${R.COUNTDOWN_TIMESTAMP}_${u}`,0,void 0,{serializer:S.number}),n=f(0);T(a,e=>{e&&(n.value=w(),n.value<r&&n.value&&v(!1)),s.value=e?m(e).isTiming:!1},{immediate:!0});function w(){const{isTiming:e,duration:o}=m(a.value);return e&&o<=r?r-o:r}function m(e){const o=Date.now(),d=E(o)-e;return{isTiming:d<=r&&d>=0,duration:d}}const c=Symbol("countdown");function v(e=!0){e&&h(),t.has(c)||t.set({id:c,handler({_timer:o,_id:M}){n.value-=i/1e3,n.value||(o.delete(M),s.value=!1)},timeout:i})}function h(){const e=Date.now();a.value=E(e)}function E(e){return Math.round(e/1e3)}return{count:n,isTiming:s,timekeeping:v}}const _={email:{regEx:p,errorMessage:{required:()=>l("landing.banner.form.requireErrMsg"),invalid:()=>l("landing.banner.form.invalidErrMsg")}},verityCode:{regEx:C,errorMessage:{required:()=>l("landing.banner.form.verCodeRequireErrMsg"),invalid:()=>l("landing.banner.form.verCodeRequireErrMsg")}}};function N(g={}){const{target:r,validatorRegEx:i=_.email}=g,u=f(""),t=f(!1);function s(){return!i||b(r.value)?!1:(t.value=!i.regEx.test(r.value),t.value?(n(),u.value=r.value.length?i.errorMessage.invalid():i.errorMessage.required()):(u.value="",a&&a(),a=null),!q(t))}let a;function n(){a||(a=T(r,()=>{s()}))}return{isError:t,errorMessage:u,validator:s}}export{_ as V,N as a,y as u};
