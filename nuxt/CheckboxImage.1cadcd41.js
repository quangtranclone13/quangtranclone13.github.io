import{d as G,r as i,b as x,k as N,j as $,M as f,q as j,D as C,G as q,at as D,o as I,a as B,f as p,p as L,u as n,h as H,i as O,H as P}from"./entry.8cba7e1e.js";import{u as U,a as W,b as A}from"./useCheckboxStatus.7c1562d4.js";import{u as F}from"./timer.4152b58e.js";import{_ as J}from"./_plugin-vue_export-helper.a1a6add7.js";import"./index.40a3e550.js";import"./isString.4072b557.js";const K={class:"img-box"},Q=["src"],X=G({__name:"CheckboxImage",props:{url:{default:""},borderColor:{default:"#ffff"},borderRadius:{default:8},modelValue:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},label:{default:""},hasLayer:{type:Boolean,default:!0},loading:{type:Boolean,default:!1}},emits:["update:modelValue","change","next"],setup(l,{expose:w,emit:R}){const a=l,h=i(),S=x(()=>({"--border-color":a.borderColor,"--border-radius":`${a.borderRadius}px`})),{model:b,isGroup:Y}=U(a),{handleClick:g}=A(a,{model:b}),{isChecked:s}=W(a,{model:b}),r=F(),T=4e3,k=20,v=100,c=Symbol("timeout"),o=i(v),V=N(o,{duration:200,transition:$.linear}),d=i(!1);a.hasLayer&&f(s,e=>{d.value&&(e?u():(z(),r.delete(c)))},{immediate:!0});function y(){r.delete(c)}function u(){r.set({id:c,timeout:T/k,handler({_timer:e,_id:t}){o.value-=100/k,o.value==0&&(e.delete(t),R("next"))}})}const M=x(()=>s.value?V.value:o.value);function z(){o.value=v}a.hasLayer&&f(d,e=>{e&&s.value?u():y()},{immediate:!0});let m;const _=i();return j(async()=>{await C(),a.hasLayer&&q(h,([{isIntersecting:e}])=>{d.value=e},{threshold:0}),f(()=>a.loading,async e=>{if(await C(),e){const{close:t}=P({target:_.value,customClass:"checkbox-image-loading",background:"transparent"});m=t}else m&&m()},{immediate:!0})}),D(()=>{r.clear()}),w({stop:y,play:u,isChecked:s}),(e,t)=>(I(),B("div",{ref_key:"checkboxImageRef",ref:h,class:O(["checkbox-image-container",{"is-checked":n(s),"is-disabled":l.disabled}]),style:L(n(S)),onClick:t[0]||(t[0]=(...E)=>n(g)&&n(g)(...E))},[p("div",K,[p("img",{src:l.url},null,8,Q),p("div",{ref_key:"loadingRef",ref:_,class:"loading-wrap"},null,512),l.hasLayer?(I(),B("div",{key:0,class:"overlap-progress",style:L({width:`${n(M)}%`})},null,4)):H("",!0)])],6))}});const ne=J(X,[["__scopeId","data-v-aff80106"]]);export{ne as default};
