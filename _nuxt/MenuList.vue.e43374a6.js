import{d as u,r,b as v,m as e,N as d,x as p,y as I}from"./entry.8cba7e1e.js";import{c as _,u as f}from"./start.f747da03.js";import{_ as o}from"./Transition.vue.6ded4129.js";const C=u({name:"",props:{listData:{type:Array,required:!1,default:()=>_},duration:{type:Number,default:()=>2e3}},components:{CommonTransition:o},emits:["getCurrent"],setup(t){let i=r(0),a=r(0),n=r(),s=r({}),{resultListData:l,flattenResultAllListData:c}=f(t.listData);const h=v(()=>l.value[0]);return{activeKey:i,activeIndex:a,timeId:n,activeItem:s,topTitleObj:h,resultListData:l,flattenResultAllListData:c}},mounted(){this.timeInterItem(this.activeIndex)},methods:{timeInterItem(t){this.activeIndex=t,this.timeId=setInterval(()=>{this.activeIndex<this.flattenResultAllListData.length?(this.titleClick(this.flattenResultAllListData[this.activeIndex],!0),this.activeIndex=this.activeIndex+1):this.activeIndex===this.flattenResultAllListData.length&&(this.activeIndex=0)},this.duration)},restartTimeInterItem(){this.stopTimeInterItem(),this.timeInterItem(this.activeIndex)},stopTimeInterItem(){clearInterval(this.timeId)},titleClick(t,i=!1,a=!1){this.activeKey=t._key,this.activeItem=t,a&&this.stopTimeInterItem(),this.activeIndex=this.flattenResultAllListData.findIndex(s=>s._key===t._key);const n=s=>{s.children&&s.children.length&&(this.activeKey=s.children[0]._key,this.activeItem=s.children[0],s.children[0].children&&n(s.children[0]))};if(t._parentKey===-1){i?t._open=!0:t._open=!t._open;let s=t._key;this.resultListData.map((l,c)=>{if(c>=1){let h=l._key;s!==h&&(l._open=!1)}})}n(t),this.$emit("getCurrent",this.activeItem._key)},renderChildTitle(t){return e("div",{class:["child-title-list-wrapper"]},[t.map((i,a)=>e("div",{class:["s-title-wrapper"]},[e("div",{class:["s-title",this.activeKey===i._key?"s-title_active":""],onClick:()=>{this.titleClick(i,!1,!0)}},[e("span",null,[d(" "),i.title])]),i.children&&i.children.length&&i._leaf<=1&&e("div",{class:["s-content",this.activeItem._parentKey===i._key?"s-content-active":""]},[this.renderChildTitle(i.children)])]))])},renderFirstTitle(){return this.resultListData.map((t,i)=>i>=1?e("div",{class:["title-item",t._open?"title-item_active":""]},[e("div",{class:["left-order"]},[e("div",{class:["order-number"],onClick:()=>{this.titleClick(t,!1,!0)}},[i])]),e("div",{class:"right-con"},[e("div",{class:["f-title top-title"],onClick:()=>{this.titleClick(t,!1,!0)}},[t.title]),e(o,null,{default:()=>[p(e("div",{class:"child-title-list"},[this.renderChildTitle(t.children)]),[[I,t.children&&t.children.length&&t._open]])]})])]):null)}},render(){return e("div",{class:"menu-list-wrapper",onMouseleave:()=>{this.restartTimeInterItem()}},[e("div",{class:["top-title",this.activeKey===this.topTitleObj._key?"top-title_active":""],onClick:()=>{this.titleClick(this.topTitleObj,!1,!0)}},[e("span",null,[d(" "),this.topTitleObj.title])]),e("div",{class:"bottom-list"},[this.renderFirstTitle()])])}});export{C as _};
