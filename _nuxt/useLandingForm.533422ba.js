import{a as A,V as te}from"./useValidator.21496c0f.js";import{u as se}from"./useGTag.98087ddc.js";import{bH as K,bt as o,K as re,ad as ie,r as p,bi as ne,aP as le,aA as E,b as ue,av as S,bJ as ce,M as F,bk as de,bo as pe,u as ge,L as ve,bB as g,bK as me,S as fe,H as _e,bL as he,bM as s,bN as be}from"./entry.8cba7e1e.js";import{D as M,J as q}from"./download.e1381952.js";import{u as ye}from"./useFbq.f4735dc4.js";import{u as we}from"./useDownload.1ab3c12d.js";var w=(a=>(a.PostLandingInfo="/v1/web/add_landing_email",a.CheckSrcId="/v1/web/check_org_src_uuid",a))(w||{});const Ie=a=>K.post(w.PostLandingInfo,a),Ae=a=>K.post(w.CheckSrcId,a),ke=Symbol("landingPageContextKey"),Ee=[{path:"/features/portrait-retouching",videoUrl:o("/videos/pages/home/portrait-beautification.mp4"),poster:o("/images/pages/home/home_video_poste04%403x.webp")},{path:"/features/background-adjustments",reserve:!0,videoUrl:o("/videos/pages/home/image-editing.mp4"),poster:o("/images/pages/home/home_video_poste06%403x.webp")},{path:"/features/color-and-tone",videoUrl:o("/videos/pages/home/color-and-tone.mp4"),poster:o("/images/pages/home/home_video_poste05%403x.webp")},{path:"/features/exclusive-presets",reserve:!0,videoUrl:o("/videos/pages/home/exclusive-presets.mp4"),poster:o("/images/pages/home/home_video_poste07%403x.webp")},{path:"/features/batch-edits",videoUrl:o("/videos/pages/home/batch-editing2.mp4"),listStyle:"auto",poster:o("/images/pages/home/home_video_poste08%403x.webp")}];var l=(a=>(a.Type1="bt",a))(l||{});function Se({loadingOptions:a,needVerCode:v,needInput:B}){const r=re({email:"",isAgreePolicy:!0,code:""}),{email:V,code:R}=ie(r),m=p(!1);function U(e="email"){b.value||(e==="email"?I():v.value&&k())}const{validator:I,isError:H,errorMessage:J}=A({target:V}),{validator:k,isError:W,errorMessage:G}=A({target:R,validatorRegEx:te.verityCode}),f=p(!1),_=p(""),{useLandingGTag:j}=se(),{_PointLandingOperate:N,_PointLandingButtonClick:O}=j(),{useLandingFbq:z}=ye(),{_PointFbqLandingButtonClick:Q}=z(),{useDownloadMp:X}=pe(),{_pointMpWebsiteDownloadApp:L}=X(),D=async(e=g.ClickTrial,n=!1)=>{const{sId:t,utm:ae,kol:oe,_type:d}=E().query;O(),Q(),t&&(he[t]||t&&ae)&&L({source:e===g.ClickTrial?d===l.Type1?s.evoto_ads_landing2_StartFreeTrial:s.evoto_ads_landing_StartFreeTrial:d===l.Type1?s.evoto_ads_landing2_discoverDownload:s.evoto_ads_landing_discoverDownload}),t&&(be[t]||t&&oe)&&L({source:e===g.ClickTrial?d===l.Type1?s.evoto_influencers_landing2_StartFreeTrial:s.evoto_influencers_landing_StartFreeTrial:d===l.Type1?s.evoto_influencers_landing2_discoverDownload:s.evoto_influencers_landing_discoverDownload}),n&&(C.value?await x.push({path:M,query:{s:q.Kol}}):await P(T.value))};async function Y(e=g.ClickTrial){if(b.value)return;if(N(e),!ge(B)){D(e,!0);return}return r.isAgreePolicy?I()&&(!v.value||k())?(D(e),await Z()):!1:(f.value=!0,_.value=ve("landing.banner.form.uncheckPolicyErrMsg"),ee(),!1)}const h=p(!1),u=me(ke),{download:P}=we({source:ne.KolLanding}),{deviceType:T,isMobile:C}=le(),i=E(),b=ue(()=>!(S(i.query.sId)?i.query.sId[0]:i.query.sId)||u&&!u.isValidity.value),x=ce();async function Z(){try{h.value=!0;const e=S(i.query.sId)?i.query.sId[0]:i.query.sId,n={email:r.email,uuid:e};(v.value||m.value)&&(n.verify_code=r.code);try{await Ie(n)}catch(t){t.data.code===fe.Limit&&(m.value=!0);return}C.value?await x.push({path:M,query:{e:r.email,s:q.Kol}}):await P(T.value)}catch{return!1}finally{h.value=!1}if(u){const{isSuccessful:e}=u;e.value=!0}return!0}let y;a&&$();function $(){F(h,e=>{e?y=_e({target:a.target.value,background:a.background}).close:y&&y()})}let c;function ee(){c||(c=F(()=>r.isAgreePolicy,e=>{e&&(f.value=!1,_.value="",c(),c=null)}))}return{errorMessage:J,isError:H,verCodeErrMsg:G,isVerCodeErr:W,agreePolicyErrMsg:_,isAgreePolicyErr:f,isDisabled:b,formData:r,submitLimit:m,handleInputBlur:U,handleBtnClick:de(Y,500)}}export{Ae as C,l as L,Ee as a,w as b,ke as l,Se as u};
